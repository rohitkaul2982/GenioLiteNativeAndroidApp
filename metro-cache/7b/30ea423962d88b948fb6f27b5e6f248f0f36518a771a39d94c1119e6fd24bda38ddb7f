{"dependencies":[{"name":"react-native","isAsync":false},{"name":"react-native-fcm","isAsync":false}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, module, exports, _dependencyMap) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.registerKilledListener = registerKilledListener;\n  exports.registerAppListener = registerAppListener;\n\n  var _reactNative = _$$_REQUIRE(_dependencyMap[0], \"react-native\");\n\n  var _reactNativeFcm = _interopRequireWildcard(_$$_REQUIRE(_dependencyMap[1], \"react-native-fcm\"));\n\n  function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj.default = obj; return newObj; } }\n\n  _reactNative.AsyncStorage.getItem('lastNotification').then(function (data) {\n    if (data) {\n      console.log('last notification', JSON.parse(data));\n\n      _reactNative.AsyncStorage.removeItem('lastNotification');\n    }\n  });\n\n  _reactNative.AsyncStorage.getItem('lastMessage').then(function (data) {\n    if (data) {\n      console.log('last message', JSON.parse(data));\n\n      _reactNative.AsyncStorage.removeItem('lastMessage');\n    }\n  });\n\n  function registerKilledListener() {\n    _reactNativeFcm.default.on(_reactNativeFcm.FCMEvent.Notification, function (notif) {\n      _reactNative.AsyncStorage.setItem('lastNotification', JSON.stringify(notif));\n\n      if (notif.opened_from_tray) {\n        setTimeout(function () {\n          if (notif._actionIdentifier === 'reply') {\n            if (_reactNative.AppState.currentState !== 'background') {\n              console.log('User replied ' + JSON.stringify(notif._userText));\n              alert('User replied ' + JSON.stringify(notif._userText));\n            } else {\n              _reactNative.AsyncStorage.setItem('lastMessage', JSON.stringify(notif._userText));\n            }\n          }\n\n          if (notif._actionIdentifier === 'view') {\n            alert(\"User clicked View in App\");\n          }\n\n          if (notif._actionIdentifier === 'dismiss') {\n            alert(\"User clicked Dismiss\");\n          }\n        }, 1000);\n      }\n    });\n  }\n\n  function registerAppListener(navigation) {\n    _reactNativeFcm.default.on(_reactNativeFcm.FCMEvent.Notification, function (notif) {\n      console.log(\"Notification\", notif);\n\n      if (_reactNative.Platform.OS === 'ios' && notif._notificationType === _reactNativeFcm.NotificationType.WillPresent && !notif.local_notification) {\n        notif.finish(_reactNativeFcm.WillPresentNotificationResult.All);\n        return;\n      }\n\n      if (notif.opened_from_tray) {}\n\n      if (_reactNative.Platform.OS === 'ios') {\n        switch (notif._notificationType) {\n          case _reactNativeFcm.NotificationType.Remote:\n            notif.finish(_reactNativeFcm.RemoteNotificationResult.NewData);\n            break;\n\n          case _reactNativeFcm.NotificationType.NotificationResponse:\n            notif.finish();\n            break;\n\n          case _reactNativeFcm.NotificationType.WillPresent:\n            notif.finish(_reactNativeFcm.WillPresentNotificationResult.All);\n            break;\n        }\n      }\n    });\n\n    _reactNativeFcm.default.on(_reactNativeFcm.FCMEvent.RefreshToken, function (token) {\n      console.log(\"TOKEN (refreshUnsubscribe)\", token);\n    });\n\n    _reactNativeFcm.default.enableDirectChannel();\n\n    _reactNativeFcm.default.on(_reactNativeFcm.FCMEvent.DirectChannelConnectionChanged, function (data) {\n      console.log('direct channel connected' + data);\n    });\n\n    setTimeout(function () {\n      _reactNativeFcm.default.isDirectChannelEstablished().then(function (d) {\n        return console.log(d);\n      });\n    }, 1000);\n  }\n\n  _reactNativeFcm.default.setNotificationCategories([{\n    id: 'com.myidentifi.fcm.text',\n    actions: [{\n      type: _reactNativeFcm.NotificationActionType.TextInput,\n      id: 'reply',\n      title: 'Quick Reply',\n      textInputButtonTitle: 'Send',\n      textInputPlaceholder: 'Say something',\n      intentIdentifiers: [],\n      options: _reactNativeFcm.NotificationActionOption.AuthenticationRequired\n    }, {\n      type: _reactNativeFcm.NotificationActionType.Default,\n      id: 'view',\n      title: 'View in App',\n      intentIdentifiers: [],\n      options: _reactNativeFcm.NotificationActionOption.Foreground\n    }, {\n      type: _reactNativeFcm.NotificationActionType.Default,\n      id: 'dismiss',\n      title: 'Dismiss',\n      intentIdentifiers: [],\n      options: _reactNativeFcm.NotificationActionOption.Destructive\n    }],\n    options: [_reactNativeFcm.NotificationCategoryOption.CustomDismissAction, _reactNativeFcm.NotificationCategoryOption.PreviewsShowTitle]\n  }]);\n});","map":[[8,0,1,0],[10,0,3,0],[14,0,5,0,"AsyncStorage"],[14,28,5,13,"getItem"],[14,35,5,0],[14,36,5,21],[14,54,5,0],[14,56,5,41,"then"],[14,60,5,0],[14,61,5,46],[14,77,5,52],[15,0,6,2],[15,8,6,5,"data"],[15,12,6,2],[15,14,6,10],[16,0,8,4,"console"],[16,14,8,12,"log"],[16,17,8,4],[16,18,8,16],[16,37,8,4],[16,39,8,37,"JSON"],[16,44,8,42,"parse"],[16,49,8,37],[16,50,8,48,"data"],[16,54,8,37],[16,55,8,4],[18,0,9,4,"AsyncStorage"],[18,32,9,17,"removeItem"],[18,42,9,4],[18,43,9,28],[18,61,9,4],[19,0,10,3],[20,0,11,1],[20,3,5,0],[22,0,13,0,"AsyncStorage"],[22,28,13,13,"getItem"],[22,35,13,0],[22,36,13,21],[22,49,13,0],[22,51,13,36,"then"],[22,55,13,0],[22,56,13,41],[22,72,13,47],[23,0,14,2],[23,8,14,5,"data"],[23,12,14,2],[23,14,14,10],[24,0,16,4,"console"],[24,14,16,12,"log"],[24,17,16,4],[24,18,16,16],[24,32,16,4],[24,34,16,32,"JSON"],[24,39,16,37,"parse"],[24,44,16,32],[24,45,16,43,"data"],[24,49,16,32],[24,50,16,4],[26,0,17,4,"AsyncStorage"],[26,32,17,17,"removeItem"],[26,42,17,4],[26,43,17,28],[26,56,17,4],[27,0,18,3],[28,0,19,1],[28,3,13,0],[30,0,21,7],[30,11,21,16,"registerKilledListener"],[30,33,21,7],[30,36,21,40],[31,0,23,2,"FCM"],[31,28,23,6,"on"],[31,30,23,2],[31,31,23,9,"FCMEvent"],[31,56,23,18,"Notification"],[31,68,23,2],[31,70,23,32],[31,87,23,41],[32,0,24,4,"AsyncStorage"],[32,32,24,17,"setItem"],[32,39,24,4],[32,40,24,25],[32,58,24,4],[32,60,24,45,"JSON"],[32,65,24,50,"stringify"],[32,74,24,45],[32,75,24,60,"notif"],[32,80,24,45],[32,81,24,4],[34,0,25,4],[34,10,25,7,"notif"],[34,16,25,13,"opened_from_tray"],[34,32,25,4],[34,34,25,30],[35,0,26,6,"setTimeout"],[35,19,26,17],[35,31,26,21],[36,0,27,8],[36,14,27,11,"notif"],[36,20,27,17,"_actionIdentifier"],[36,37,27,11],[36,42,27,39],[36,49,27,8],[36,51,27,47],[37,0,28,10],[37,16,28,13,"AppState"],[37,38,28,22,"currentState"],[37,50,28,13],[37,55,28,39],[37,67,28,10],[37,69,28,52],[38,0,29,12,"console"],[38,22,29,20,"log"],[38,25,29,12],[38,26,29,24],[38,44,29,41,"JSON"],[38,49,29,46,"stringify"],[38,58,29,41],[38,59,29,56,"notif"],[38,65,29,62,"_userText"],[38,74,29,41],[38,75,29,12],[39,0,30,12,"alert"],[39,20,30,18],[39,38,30,35,"JSON"],[39,43,30,40,"stringify"],[39,52,30,35],[39,53,30,50,"notif"],[39,59,30,56,"_userText"],[39,68,30,35],[39,69,30,12],[40,0,31,11],[40,13,28,10],[40,19,31,17],[41,0,32,12,"AsyncStorage"],[41,40,32,25,"setItem"],[41,47,32,12],[41,48,32,33],[41,61,32,12],[41,63,32,48,"JSON"],[41,68,32,53,"stringify"],[41,77,32,48],[41,78,32,63,"notif"],[41,84,32,69,"_userText"],[41,93,32,48],[41,94,32,12],[42,0,33,11],[43,0,34,9],[45,0,35,8],[45,14,35,11,"notif"],[45,20,35,17,"_actionIdentifier"],[45,37,35,11],[45,42,35,39],[45,48,35,8],[45,50,35,46],[46,0,36,10,"alert"],[46,18,36,16],[46,44,36,10],[47,0,37,9],[49,0,38,8],[49,14,38,11,"notif"],[49,20,38,17,"_actionIdentifier"],[49,37,38,11],[49,42,38,39],[49,51,38,8],[49,53,38,49],[50,0,39,10,"alert"],[50,18,39,16],[50,40,39,10],[51,0,40,9],[52,0,41,7],[52,9,26,6],[52,11,41,9],[52,15,26,6],[53,0,42,5],[54,0,43,3],[54,5,23,2],[55,0,44,1],[57,0,47,7],[57,11,47,16,"registerAppListener"],[57,30,47,7],[57,31,47,36,"navigation"],[57,41,47,7],[57,43,47,47],[58,0,48,2,"FCM"],[58,28,48,6,"on"],[58,30,48,2],[58,31,48,9,"FCMEvent"],[58,56,48,18,"Notification"],[58,68,48,2],[58,70,48,32],[58,87,48,41],[59,0,49,4,"console"],[59,14,49,12,"log"],[59,17,49,4],[59,18,49,16],[59,32,49,4],[59,34,49,32,"notif"],[59,39,49,4],[61,0,51,4],[61,10,51,7,"Platform"],[61,32,51,16,"OS"],[61,34,51,7],[61,39,51,22],[61,44,51,7],[61,48,51,31,"notif"],[61,54,51,37,"_notificationType"],[61,71,51,31],[61,76,51,59,"NotificationType"],[61,109,51,76,"WillPresent"],[61,120,51,7],[61,124,51,91],[61,125,51,92,"notif"],[61,131,51,98,"local_notification"],[61,149,51,4],[61,151,51,117],[62,0,54,6,"notif"],[62,14,54,12,"finish"],[62,20,54,6],[62,21,54,19,"WillPresentNotificationResult"],[62,67,54,49,"All"],[62,70,54,6],[63,0,55,6],[64,0,56,5],[66,0,58,4],[66,10,58,7,"notif"],[66,16,58,13,"opened_from_tray"],[66,32,58,4],[66,34,58,30],[66,35,67,5],[68,0,69,4],[68,10,69,7,"Platform"],[68,32,69,16,"OS"],[68,34,69,7],[68,39,69,22],[68,44,69,4],[68,46,69,28],[69,0,74,12],[69,16,74,19,"notif"],[69,22,74,25,"_notificationType"],[69,39,74,12],[70,0,75,14],[70,15,75,19,"NotificationType"],[70,48,75,36,"Remote"],[70,54,75,14],[71,0,76,16,"notif"],[71,18,76,22,"finish"],[71,24,76,16],[71,25,76,29,"RemoteNotificationResult"],[71,66,76,54,"NewData"],[71,73,76,16],[72,0,77,16],[74,0,78,14],[74,15,78,19,"NotificationType"],[74,48,78,36,"NotificationResponse"],[74,68,78,14],[75,0,79,16,"notif"],[75,18,79,22,"finish"],[75,24,79,16],[76,0,80,16],[78,0,81,14],[78,15,81,19,"NotificationType"],[78,48,81,36,"WillPresent"],[78,59,81,14],[79,0,82,16,"notif"],[79,18,82,22,"finish"],[79,24,82,16],[79,25,82,29,"WillPresentNotificationResult"],[79,71,82,59,"All"],[79,74,82,16],[80,0,85,16],[81,0,74,12],[82,0,87,5],[83,0,88,3],[83,5,48,2],[85,0,90,2,"FCM"],[85,28,90,6,"on"],[85,30,90,2],[85,31,90,9,"FCMEvent"],[85,56,90,18,"RefreshToken"],[85,68,90,2],[85,70,90,32],[85,87,90,41],[86,0,91,4,"console"],[86,14,91,12,"log"],[86,17,91,4],[86,18,91,16],[86,46,91,4],[86,48,91,46,"token"],[86,53,91,4],[87,0,92,3],[87,5,90,2],[89,0,94,2,"FCM"],[89,28,94,6,"enableDirectChannel"],[89,47,94,2],[91,0,95,2,"FCM"],[91,28,95,6,"on"],[91,30,95,2],[91,31,95,9,"FCMEvent"],[91,56,95,18,"DirectChannelConnectionChanged"],[91,86,95,2],[91,88,95,50],[91,98,95,51,"data"],[91,102,95,50],[91,104,95,60],[92,0,96,4,"console"],[92,14,96,12,"log"],[92,17,96,4],[92,18,96,16],[92,47,96,45,"data"],[92,51,96,4],[93,0,97,3],[93,5,95,2],[95,0,98,2,"setTimeout"],[95,15,98,13],[95,27,98,24],[96,0,99,4,"FCM"],[96,30,99,8,"isDirectChannelEstablished"],[96,56,99,4],[96,59,99,37,"then"],[96,63,99,4],[96,64,99,42],[97,0,99,42],[97,15,99,47,"console"],[97,23,99,55,"log"],[97,26,99,47],[97,27,99,59,"d"],[97,28,99,47],[97,29,99,42],[98,0,99,42],[98,7,99,4],[99,0,100,3],[99,5,98,2],[99,7,100,5],[99,11,98,2],[100,0,101,1],[102,0,103,0,"FCM"],[102,26,103,4,"setNotificationCategories"],[102,51,103,0],[102,52,103,30],[102,53,104,2],[103,0,105,4,"id"],[103,8,105,8],[103,33,104,2],[104,0,106,4,"actions"],[104,13,106,13],[104,14,107,6],[105,0,108,8,"type"],[105,12,108,14,"NotificationActionType"],[105,51,108,37,"TextInput"],[105,60,107,6],[106,0,109,8,"id"],[106,10,109,12],[106,17,107,6],[107,0,110,8,"title"],[107,13,110,15],[107,26,107,6],[108,0,111,8,"textInputButtonTitle"],[108,28,111,30],[108,34,107,6],[109,0,112,8,"textInputPlaceholder"],[109,28,112,30],[109,43,107,6],[110,0,113,8,"intentIdentifiers"],[110,25,113,27],[110,27,107,6],[111,0,114,8,"options"],[111,15,114,17,"NotificationActionOption"],[111,56,114,42,"AuthenticationRequired"],[112,0,107,6],[112,5,106,13],[112,7,116,6],[113,0,117,8,"type"],[113,12,117,14,"NotificationActionType"],[113,51,117,37,"Default"],[113,58,116,6],[114,0,118,8,"id"],[114,10,118,12],[114,16,116,6],[115,0,119,8,"title"],[115,13,119,15],[115,26,116,6],[116,0,120,8,"intentIdentifiers"],[116,25,120,27],[116,27,116,6],[117,0,121,8,"options"],[117,15,121,17,"NotificationActionOption"],[117,56,121,42,"Foreground"],[118,0,116,6],[118,5,106,13],[118,7,123,6],[119,0,124,8,"type"],[119,12,124,14,"NotificationActionType"],[119,51,124,37,"Default"],[119,58,123,6],[120,0,125,8,"id"],[120,10,125,12],[120,19,123,6],[121,0,126,8,"title"],[121,13,126,15],[121,22,123,6],[122,0,127,8,"intentIdentifiers"],[122,25,127,27],[122,27,123,6],[123,0,128,8,"options"],[123,15,128,17,"NotificationActionOption"],[123,56,128,42,"Destructive"],[124,0,123,6],[124,5,106,13],[124,6,104,2],[125,0,131,4,"options"],[125,13,131,13],[125,14,131,14,"NotificationCategoryOption"],[125,57,131,41,"CustomDismissAction"],[125,76,131,13],[125,78,131,62,"NotificationCategoryOption"],[125,121,131,89,"PreviewsShowTitle"],[125,138,131,13],[126,0,104,2],[126,3,103,30],[126,4,103,0]]},"type":"js/module"}]}